{"id":478,"date":"2023-08-02T15:18:17","date_gmt":"2023-08-02T07:18:17","guid":{"rendered":"https:\/\/www.szuea.com\/?p=478"},"modified":"2023-08-02T15:18:19","modified_gmt":"2023-08-02T07:18:19","slug":"python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81","status":"publish","type":"post","link":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/","title":{"rendered":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501"},"content":{"rendered":"<h5 class=\"wp-block-heading wp-block-heading\" id=\"e7babfe7a88be5ae89e585a8\">&#32447;&#31243;&#23433;&#20840;<\/h5>\n\n\n<p class=\"wp-block-paragraph \">&#32447;&#31243;&#23433;&#20840;&#65288;Thread Safety&#65289;&#26159;&#25351;&#22312;&#22810;&#32447;&#31243;&#29615;&#22659;&#19979;&#65292;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#35775;&#38382;&#20849;&#20139;&#36164;&#28304;&#26102;&#65292;&#19981;&#20250;&#20986;&#29616;&#24847;&#22806;&#30340;&#38169;&#35823;&#25110;&#32773;&#19981;&#19968;&#33268;&#30340;&#32467;&#26524;&#12290;&#22312;&#24182;&#21457;&#32534;&#31243;&#20013;&#65292;&#32447;&#31243;&#23433;&#20840;&#26159;&#19968;&#20010;&#37325;&#35201;&#30340;&#27010;&#24565;&#65292;&#22240;&#20026;&#22810;&#20010;&#32447;&#31243;&#20043;&#38388;&#30340;&#31454;&#20105;&#26465;&#20214;&#20250;&#23548;&#33268;&#25968;&#25454;&#30340;&#19981;&#19968;&#33268;&#24615;&#21644;&#38169;&#35823;&#30340;&#32467;&#26524;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#32447;&#31243;&#23433;&#20840;&#26159;&#30001;&#20110;&#22810;&#20010;&#32447;&#31243;&#35775;&#38382;&#21644;&#20462;&#25913;&#20849;&#20139;&#36164;&#28304;&#21487;&#33021;&#20250;&#23548;&#33268;&#20197;&#19979;&#38382;&#39064;&#65306;<\/p>\n\n\n<ol style=\"\" class=\"wp-block-list \">\n<li>&#31454;&#20105;&#26465;&#20214;&#65288;Race Condition&#65289;&#65306;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#23545;&#19968;&#20010;&#20849;&#20139;&#36164;&#28304;&#36827;&#34892;&#35835;&#20889;&#25805;&#20316;&#65292;&#36896;&#25104;&#25968;&#25454;&#19981;&#19968;&#33268;&#30340;&#32467;&#26524;&#12290;<\/li>\n\n\n\n<li>&#27515;&#38145;&#65288;Deadlock&#65289;&#65306;&#22810;&#20010;&#32447;&#31243;&#24444;&#27492;&#25345;&#26377;&#26576;&#20010;&#36164;&#28304;&#30340;&#38145;&#65292;&#24182;&#19988;&#30456;&#20114;&#31561;&#24453;&#23545;&#26041;&#37322;&#25918;&#38145;&#65292;&#23548;&#33268;&#25152;&#26377;&#32447;&#31243;&#37117;&#26080;&#27861;&#32487;&#32493;&#25191;&#34892;&#12290;<\/li>\n\n\n\n<li>&#27963;&#38145;&#65288;Livelock&#65289;&#65306;&#22810;&#20010;&#32447;&#31243;&#22312;&#35797;&#22270;&#35299;&#20915;&#27515;&#38145;&#38382;&#39064;&#26102;&#65292;&#24444;&#27492;&#31036;&#35753;&#65292;&#26080;&#27861;&#32487;&#32493;&#25191;&#34892;&#12290;<\/li>\n<\/ol>\n\n\n<p class=\"wp-block-paragraph \">&#20026;&#20102;&#20445;&#35777;&#32447;&#31243;&#23433;&#20840;&#65292;&#21487;&#20197;&#37319;&#21462;&#20197;&#19979;&#25514;&#26045;&#65306;<\/p>\n\n\n<ol style=\"\" class=\"wp-block-list \">\n<li>&#20114;&#26021;&#38145;&#65288;Mutex&#65289;&#65306;&#36890;&#36807;&#21152;&#38145;&#26426;&#21046;&#26469;&#20445;&#35777;&#21516;&#19968;&#26102;&#38388;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#35775;&#38382;&#20849;&#20139;&#36164;&#28304;&#65292;&#20854;&#20182;&#32447;&#31243;&#38656;&#35201;&#31561;&#24453;&#38145;&#37322;&#25918;&#21518;&#25165;&#33021;&#35775;&#38382;&#12290;<\/li>\n\n\n\n<li>&#20449;&#21495;&#37327;&#65288;Semaphore&#65289;&#65306;&#36890;&#36807;&#19968;&#20010;&#35745;&#25968;&#22120;&#26469;&#25511;&#21046;&#21516;&#26102;&#35775;&#38382;&#20849;&#20139;&#36164;&#28304;&#30340;&#32447;&#31243;&#25968;&#37327;&#12290;&#24403;&#35745;&#25968;&#22120;&#20026;0&#26102;&#65292;&#34920;&#31034;&#36164;&#28304;&#34987;&#21344;&#29992;&#65292;&#20854;&#20182;&#32447;&#31243;&#38656;&#35201;&#31561;&#24453;&#12290;<\/li>\n\n\n\n<li>&#26465;&#20214;&#21464;&#37327;&#65288;Condition&#65289;&#65306;&#36890;&#36807;&#26465;&#20214;&#31561;&#24453;&#21644;&#26465;&#20214;&#36890;&#30693;&#26426;&#21046;&#26469;&#25511;&#21046;&#32447;&#31243;&#30340;&#25191;&#34892;&#39034;&#24207;&#65292;&#30830;&#20445;&#32447;&#31243;&#22312;&#28385;&#36275;&#29305;&#23450;&#26465;&#20214;&#20043;&#21518;&#20877;&#36827;&#34892;&#25805;&#20316;&#12290;<\/li>\n\n\n\n<li>&#21407;&#23376;&#25805;&#20316;&#65288;Atomic Operation&#65289;&#65306;&#25552;&#20379;&#21407;&#23376;&#24615;&#30340;&#25805;&#20316;&#26041;&#27861;&#65292;&#33021;&#22815;&#22312;&#19981;&#38656;&#35201;&#21152;&#38145;&#30340;&#24773;&#20917;&#19979;&#23436;&#25104;&#23545;&#20849;&#20139;&#36164;&#28304;&#30340;&#25805;&#20316;&#12290;<\/li>\n\n\n\n<li>&#32534;&#20889;&#32447;&#31243;&#23433;&#20840;&#30340;&#25968;&#25454;&#32467;&#26500;&#21644;&#31639;&#27861;&#65306;&#35774;&#35745;&#25968;&#25454;&#32467;&#26500;&#21644;&#31639;&#27861;&#26102;&#32771;&#34385;&#32447;&#31243;&#23433;&#20840;&#24615;&#65292;&#36991;&#20813;&#31454;&#20105;&#26465;&#20214;&#21644;&#25968;&#25454;&#19981;&#19968;&#33268;&#12290;<\/li>\n<\/ol>\n\n\n<p class=\"wp-block-paragraph \">&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#24182;&#19981;&#26159;&#25152;&#26377;&#30340;&#20195;&#30721;&#37117;&#38656;&#35201;&#36827;&#34892;&#32447;&#31243;&#23433;&#20840;&#22788;&#29702;&#65292;&#21482;&#26377;&#22312;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#35775;&#38382;&#21644;&#20462;&#25913;&#20849;&#20139;&#36164;&#28304;&#26102;&#25165;&#38656;&#35201;&#32771;&#34385;&#32447;&#31243;&#23433;&#20840;&#24615;&#12290;&#22914;&#26524;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#22312;&#35775;&#38382;&#20849;&#20139;&#36164;&#28304;&#65292;&#37027;&#20040;&#23601;&#19981;&#23384;&#22312;&#32447;&#31243;&#23433;&#20840;&#38382;&#39064;&#12290;<\/p>\n\n\n<h5 class=\"wp-block-heading wp-block-heading\" id=\"e4ba92e696a5e99481\">&#20114;&#26021;&#38145;<\/h5>\n\n\n<p class=\"wp-block-paragraph \">&#23613;&#31649;&#22312;&#20320;&#30340;&#20195;&#30721;&#20013;&#27809;&#26377;&#20351;&#29992;&#20114;&#26021;&#38145;&#36827;&#34892;&#21516;&#27493;&#25511;&#21046;&#65292;&#20294;&#26159;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#33021;&#20250;&#24471;&#21040;&#27491;&#30830;&#30340;&#32467;&#26524;&#12290;&#36825;&#26159;&#22240;&#20026;&#22312;&#36825;&#20010;&#29305;&#23450;&#30340;&#26696;&#20363;&#20013;&#65292;&#20849;&#20139;&#36164;&#28304;<code>shared_resource<\/code>&#30340;&#22686;&#21152;&#25805;&#20316;&#36275;&#22815;&#31616;&#21333;&#65292;&#19981;&#28041;&#21450;&#21040;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#20462;&#25913;&#21516;&#19968;&#20010;&#25968;&#25454;&#30340;&#22797;&#26434;&#24773;&#20917;&#65292;&#25152;&#20197;&#21487;&#33021;&#19981;&#20250;&#20986;&#29616;&#31454;&#24577;&#26465;&#20214;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#28982;&#32780;&#65292;&#19981;&#21152;&#38145;&#30340;&#24773;&#20917;&#19979;&#23384;&#22312;&#28508;&#22312;&#30340;&#31454;&#20105;&#26465;&#20214;&#65292;&#36825;&#20250;&#23548;&#33268;&#25968;&#25454;&#19981;&#19968;&#33268;&#30340;&#32467;&#26524;&#12290;&#24403;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#23545;<code>shared_resource<\/code>&#36827;&#34892;&#20889;&#25805;&#20316;&#26102;&#65292;&#21487;&#33021;&#20250;&#21457;&#29983;&#25968;&#25454;&#35206;&#30422;&#25110;&#32773;&#35835;&#21462;&#33039;&#25968;&#25454;&#30340;&#38382;&#39064;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#23613;&#31649;&#26576;&#20123;&#24773;&#20917;&#19979;&#20195;&#30721;&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;&#27491;&#30830;&#30340;&#65292;&#36825;&#24182;&#19981;&#20195;&#34920;&#35813;&#20195;&#30721;&#26159;&#27491;&#30830;&#30340;&#12290;&#22312;&#24182;&#21457;&#32534;&#31243;&#20013;&#65292;&#27491;&#30830;&#24615;&#19981;&#24212;&#35813;&#20381;&#36182;&#20110;&#32447;&#31243;&#25191;&#34892;&#30340;&#39034;&#24207;&#21644;&#26102;&#38388;&#12290;&#22914;&#26524;&#22312;&#19981;&#20351;&#29992;&#20114;&#26021;&#38145;&#30340;&#24773;&#20917;&#19979;&#65292;&#32447;&#31243;&#25191;&#34892;&#30340;&#39034;&#24207;&#25110;&#26102;&#38388;&#21457;&#29983;&#21464;&#21270;&#65292;&#32467;&#26524;&#21487;&#33021;&#20250;&#21464;&#24471;&#19981;&#27491;&#30830;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#20026;&#20102;&#30830;&#20445;&#32447;&#31243;&#23433;&#20840;&#24615;&#21644;&#27491;&#30830;&#24615;&#65292;&#24314;&#35758;&#22312;&#28041;&#21450;&#20849;&#20139;&#36164;&#28304;&#30340;&#24182;&#21457;&#20195;&#30721;&#20013;&#20351;&#29992;&#36866;&#24403;&#30340;&#21516;&#27493;&#26426;&#21046;&#65292;&#22914;&#20114;&#26021;&#38145;&#12290;&#36890;&#36807;&#19978;&#38145;&#21644;&#35299;&#38145;&#25805;&#20316;&#65292;&#21487;&#20197;&#20445;&#35777;&#27599;&#27425;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#36827;&#20837;&#20020;&#30028;&#21306;&#65292;&#36991;&#20813;&#31454;&#24577;&#26465;&#20214;&#21644;&#25968;&#25454;&#19981;&#19968;&#33268;&#38382;&#39064;&#30340;&#21457;&#29983;&#12290;<\/p>\n\n\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro padding-bottom-disabled\" data-code-block-pro-font-family=\"Code-Pro-JetBrains-Mono\" style=\"font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem\"><span style=\"display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"54\" height=\"14\" viewBox=\"0 0 54 14\"><g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1 1)\"><circle cx=\"6\" cy=\"6\" r=\"6\" fill=\"#FF5F56\" stroke=\"#E0443E\" stroke-width=\".5\"><\/circle><circle cx=\"26\" cy=\"6\" r=\"6\" fill=\"#FFBD2E\" stroke=\"#DEA123\" stroke-width=\".5\"><\/circle><circle cx=\"46\" cy=\"6\" r=\"6\" fill=\"#27C93F\" stroke=\"#1AAB29\" stroke-width=\".5\"><\/circle><\/g><\/svg><\/span><span role=\"button\" tabindex=\"0\" data-code=\"import threading\n\n# \u5171\u4eab\u8d44\u6e90\nshared_resource = 0\n# \u4e92\u65a5\u9501\n# lock = threading.Lock() Lock\u4e0d\u652f\u6301\u9012\u5f52\uff0c\u65e0\u6cd5\u540c\u65f6\u4e0a\u591a\u628a\u9501\nlock = threading.RLock() # RLock\u53ef\u4ee5\u4e0a\u591a\u628a\u9501\n# \u5728Python\u7684threading\u6a21\u5757\u4e2d\uff0cRLock\uff08\u9012\u5f52\u9501\uff09\u548cLock\uff08\u4e92\u65a5\u9501\uff09\u90fd\u652f\u6301\u4e0a\u4e0b\u6587\u7ba1\u7406\u534f\u8bae\uff08Context Management Protocol\uff09\uff0c\u5373\u652f\u6301\u4f7f\u7528with\u8bed\u53e5\u6765\u81ea\u52a8\u83b7\u53d6\u548c\u91ca\u653e\u9501\u3002\n\n\n# \u8ba1\u7b97\u51fd\u6570\ndef calculate():\n    global shared_resource\n    for _ in range(10000):\n        lock.acquire()  # \u4e0a\u9501\n        shared_resource += 1\n        lock.release()  # \u89e3\u9501\n\n\n# \u4e34\u754c\u533a\n# with lock:\n#     shared_resource += 1\n\n\n# \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\nthreads = []\nfor _ in range(9):\n    thread = threading.Thread(target=calculate)\n    threads.append(thread)\n\n# \u542f\u52a8\u7ebf\u7a0b\nfor thread in threads:\n    thread.start()\n\n# \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f\nfor thread in threads:\n    thread.join()\n\n# \u8f93\u51fa\u7ed3\u679c\nprint(f&quot;Final value of shared_resource: {shared_resource}&quot;)\n# result:Final value of shared_resource: 90000\" style=\"color:#F8F8F2;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki dracula\" style=\"background-color: #282A36\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FF79C6\">import<\/span><span style=\"color: #F8F8F2\"> threading<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u5171\u4eab\u8d44\u6e90<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">shared_resource <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">0<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u4e92\u65a5\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># lock = threading.Lock() Lock\u4e0d\u652f\u6301\u9012\u5f52\uff0c\u65e0\u6cd5\u540c\u65f6\u4e0a\u591a\u628a\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">lock <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.RLock() <\/span><span style=\"color: #6272A4\"># RLock\u53ef\u4ee5\u4e0a\u591a\u628a\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u5728Python\u7684threading\u6a21\u5757\u4e2d\uff0cRLock\uff08\u9012\u5f52\u9501\uff09\u548cLock\uff08\u4e92\u65a5\u9501\uff09\u90fd\u652f\u6301\u4e0a\u4e0b\u6587\u7ba1\u7406\u534f\u8bae\uff08Context Management Protocol\uff09\uff0c\u5373\u652f\u6301\u4f7f\u7528with\u8bed\u53e5\u6765\u81ea\u52a8\u83b7\u53d6\u548c\u91ca\u653e\u9501\u3002<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u8ba1\u7b97\u51fd\u6570<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">calculate<\/span><span style=\"color: #F8F8F2\">():<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">global<\/span><span style=\"color: #F8F8F2\"> shared_resource<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> _ <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">10000<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.acquire()  <\/span><span style=\"color: #6272A4\"># \u4e0a\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        shared_resource <\/span><span style=\"color: #FF79C6\">+=<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">1<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.release()  <\/span><span style=\"color: #6272A4\"># \u89e3\u9501<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u4e34\u754c\u533a<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># with lock:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\">#     shared_resource += 1<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">threads <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> []<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> _ <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">9<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">calculate)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    threads.append(thread)<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u542f\u52a8\u7ebf\u7a0b<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> thread <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> threads:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread.start()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> thread <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> threads:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread.join()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u8f93\u51fa\u7ed3\u679c<\/span><\/span>\n<span class=\"line\"><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #FF79C6\">f<\/span><span style=\"color: #F1FA8C\">&quot;Final value of shared_resource: <\/span><span style=\"color: #BD93F9\">{<\/span><span style=\"color: #F8F8F2\">shared_resource<\/span><span style=\"color: #BD93F9\">}<\/span><span style=\"color: #F1FA8C\">&quot;<\/span><span style=\"color: #F8F8F2\">)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># result:Final value of shared_resource: 90000<\/span><\/span><\/code><\/pre><span style=\"display:flex;align-items:flex-end;padding:10px;width:100%;justify-content:flex-end;background-color:#282A36;color:#efefe1;font-size:12px;line-height:1;position:relative\">Python<\/span><\/div>\n\n\n<h5 class=\"wp-block-heading wp-block-heading\" id=\"e4b88ae5a49ae68a8ae99481e79a84e4bd9ce794a8\">&#19978;&#22810;&#25226;&#38145;&#30340;&#20316;&#29992;<\/h5>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#24182;&#21457;&#32534;&#31243;&#20013;&#65292;&#20351;&#29992;&#21333;&#20010;&#38145;&#26469;&#20445;&#25252;&#20849;&#20139;&#36164;&#28304;&#21487;&#33021;&#26159;&#19981;&#22815;&#30340;&#65292;&#26377;&#26102;&#21487;&#33021;&#38656;&#35201;&#20351;&#29992;&#22810;&#25226;&#38145;&#26469;&#23454;&#29616;&#26356;&#31934;&#32454;&#30340;&#21516;&#27493;&#25805;&#20316;&#12290;&#19979;&#38754;&#26159;&#22810;&#25226;&#38145;&#30340;&#19968;&#20123;&#20316;&#29992;&#65306;<\/p>\n\n\n<h4 class=\"wp-block-heading wp-block-heading\" id=\"1-e4bf9de68aa4e4b88de5908ce79a84e4b8b4e7958ce58cbaefbc9a\">1.&#20445;&#25252;&#19981;&#21516;&#30340;&#20020;&#30028;&#21306;&#65306;<\/h4>\n\n\n<p class=\"wp-block-paragraph \">&#22914;&#26524;&#19968;&#20010;&#25991;&#20214;&#20013;&#26377;&#22810;&#20010;&#29420;&#31435;&#30340;&#20020;&#30028;&#21306;&#65292;&#21487;&#20197;&#20026;&#27599;&#20010;&#20020;&#30028;&#21306;&#20998;&#37197;&#19968;&#20010;&#29420;&#31435;&#30340;&#38145;&#12290;&#36825;&#26679;&#21487;&#20197;&#30830;&#20445;&#22312;&#26576;&#19968;&#26102;&#21051;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#33021;&#22815;&#35775;&#38382;&#27599;&#20010;&#20020;&#30028;&#21306;&#30340;&#20195;&#30721;&#65292;&#36991;&#20813;&#20102;&#20020;&#30028;&#21306;&#20043;&#38388;&#30340;&#31454;&#24577;&#26465;&#20214;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">example&#65306;<\/p>\n\n\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro padding-bottom-disabled\" data-code-block-pro-font-family=\"Code-Pro-JetBrains-Mono\" style=\"font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem\"><span style=\"display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"54\" height=\"14\" viewBox=\"0 0 54 14\"><g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1 1)\"><circle cx=\"6\" cy=\"6\" r=\"6\" fill=\"#FF5F56\" stroke=\"#E0443E\" stroke-width=\".5\"><\/circle><circle cx=\"26\" cy=\"6\" r=\"6\" fill=\"#FFBD2E\" stroke=\"#DEA123\" stroke-width=\".5\"><\/circle><circle cx=\"46\" cy=\"6\" r=\"6\" fill=\"#27C93F\" stroke=\"#1AAB29\" stroke-width=\".5\"><\/circle><\/g><\/svg><\/span><span role=\"button\" tabindex=\"0\" data-code=\"import threading\n\nclass File:\n    def __init__(self):\n        self.data1 = []\n        self.data2 = []\n        self.lock1 = threading.Lock()\n        self.lock2 = threading.Lock()\n\n    def process_data1(self, new_data):\n        self.lock1.acquire()  # \u83b7\u53d6\u95011\n        try:\n            # \u5bf9data1\u8fdb\u884c\u64cd\u4f5c\n            self.data1.append(new_data)\n            print(&quot;Data1:&quot;, self.data1)\n        finally:\n            self.lock1.release()  # \u91ca\u653e\u95011\n\n    def process_data2(self, new_data):\n        self.lock2.acquire()  # \u83b7\u53d6\u95012\n        try:\n            # \u5bf9data2\u8fdb\u884c\u64cd\u4f5c\n            self.data2.append(new_data)\n            print(&quot;Data2:&quot;, self.data2)\n        finally:\n            self.lock2.release()  # \u91ca\u653e\u95012\n\n# \u521b\u5efa\u6587\u4ef6\u5bf9\u8c61\nfile = File()\n\n# \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u64cd\u4f5c1\nfor i in range(5):\n    threading.Thread(target=file.process_data1, args=(i,)).start()\n\n# \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u64cd\u4f5c2\nfor i in range(5):\n    threading.Thread(target=file.process_data2, args=(i,)).start()\" style=\"color:#F8F8F2;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki dracula\" style=\"background-color: #282A36\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FF79C6\">import<\/span><span style=\"color: #F8F8F2\"> threading<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">class<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">File<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">__init__<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data1 <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> []<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data2 <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> []<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock1 <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.Lock()<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock2 <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.Lock()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">process_data1<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #FFB86C; font-style: italic\">new_data<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock1.acquire()  <\/span><span style=\"color: #6272A4\"># \u83b7\u53d6\u95011<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">try<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #6272A4\"># \u5bf9data1\u8fdb\u884c\u64cd\u4f5c<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data1.append(new_data)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F1FA8C\">Data1:<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data1)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">finally<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock1.release()  <\/span><span style=\"color: #6272A4\"># \u91ca\u653e\u95011<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">process_data2<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #FFB86C; font-style: italic\">new_data<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock2.acquire()  <\/span><span style=\"color: #6272A4\"># \u83b7\u53d6\u95012<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">try<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #6272A4\"># \u5bf9data2\u8fdb\u884c\u64cd\u4f5c<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data2.append(new_data)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F1FA8C\">Data2:<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data2)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">finally<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock2.release()  <\/span><span style=\"color: #6272A4\"># \u91ca\u653e\u95012<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u6587\u4ef6\u5bf9\u8c61<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">file <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> File()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u64cd\u4f5c1<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> i <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">5<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">file.process_data1, <\/span><span style=\"color: #FFB86C; font-style: italic\">args<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">(i,)).start()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u64cd\u4f5c2<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> i <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">5<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">file.process_data2, <\/span><span style=\"color: #FFB86C; font-style: italic\">args<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">(i,)).start()<\/span><\/span><\/code><\/pre><span style=\"display:flex;align-items:flex-end;padding:10px;width:100%;justify-content:flex-end;background-color:#282A36;color:#efefe1;font-size:12px;line-height:1;position:relative\">Python<\/span><\/div>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#19978;&#36848;&#20195;&#30721;&#20013;&#65292;<code>File<\/code> &#31867;&#34920;&#31034;&#19968;&#20010;&#25991;&#20214;&#23545;&#35937;&#65292;&#23427;&#21253;&#21547;&#20004;&#20010;&#25968;&#25454;&#21015;&#34920; <code>data1<\/code> &#21644; <code>data2<\/code>&#65292;&#20197;&#21450;&#20004;&#20010;&#38145; <code>lock1<\/code> &#21644; <code>lock2<\/code>&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \"><code>process_data1<\/code> &#26041;&#27861;&#29992;&#20110;&#22788;&#29702; <code>data1<\/code>&#65292;&#23427;&#22312;&#25805;&#20316; <code>data1<\/code> &#26102;&#33719;&#21462;&#38145;1&#65292;&#25191;&#34892;&#25805;&#20316;&#21518;&#37322;&#25918;&#38145;1&#12290;&#31867;&#20284;&#22320;&#65292;<code>process_data2<\/code> &#26041;&#27861;&#29992;&#20110;&#22788;&#29702; <code>data2<\/code>&#65292;&#23427;&#22312;&#25805;&#20316; <code>data2<\/code> &#26102;&#33719;&#21462;&#38145;2&#65292;&#25191;&#34892;&#25805;&#20316;&#21518;&#37322;&#25918;&#38145;2&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#20027;&#32447;&#31243;&#20013;&#65292;&#25105;&#20204;&#21019;&#24314;&#20102;&#22810;&#20010;&#32447;&#31243;&#20998;&#21035;&#26469;&#35843;&#29992; <code>process_data1<\/code> &#21644; <code>process_data2<\/code> &#26041;&#27861;&#12290;&#36825;&#20123;&#32447;&#31243;&#24182;&#21457;&#25191;&#34892;&#65292;&#20294;&#26159;&#23545;&#20110; <code>data1<\/code> &#21644; <code>data2<\/code> &#30340;&#25805;&#20316;&#26159;&#20114;&#26021;&#30340;&#65292;&#22240;&#20026;&#23427;&#20204;&#20351;&#29992;&#20102;&#19981;&#21516;&#30340;&#38145;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#36890;&#36807;&#20351;&#29992;&#19981;&#21516;&#30340;&#38145;&#26469;&#20445;&#25252;&#19981;&#21516;&#30340;&#20020;&#30028;&#21306;&#65292;&#25105;&#20204;&#21487;&#20197;&#23454;&#29616;&#23545;&#19981;&#21516;&#36164;&#28304;&#30340;&#29420;&#31435;&#25511;&#21046;&#65292;&#36991;&#20813;&#31454;&#20105;&#26465;&#20214;&#21644;&#25968;&#25454;&#19968;&#33268;&#24615;&#38382;&#39064;&#12290;&#36825;&#26679;&#21487;&#20197;&#25552;&#39640;&#24182;&#21457;&#24615;&#33021;&#65292;&#24182;&#30830;&#20445;&#19981;&#21516;&#20020;&#30028;&#21306;&#20043;&#38388;&#30340;&#25805;&#20316;&#26159;&#23433;&#20840;&#30340;&#12290;<\/p>\n\n\n<h4 class=\"wp-block-heading wp-block-heading\" id=\"2-e5878fe5b091e99481e7ab9ee4ba89efbc9a\">2.&#20943;&#23569;&#38145;&#31454;&#20105;&#65306;<\/h4>\n\n\n<p class=\"wp-block-paragraph \">&#20351;&#29992;&#22810;&#25226;&#38145;&#21487;&#20197;&#20943;&#23569;&#19981;&#21516;&#32447;&#31243;&#20043;&#38388;&#23545;&#21516;&#19968;&#38145;&#30340;&#31454;&#20105;&#12290;&#22914;&#26524;&#22810;&#20010;&#32447;&#31243;&#21482;&#20250;&#35775;&#38382;&#20854;&#20013;&#19968;&#37096;&#20998;&#20849;&#20139;&#36164;&#28304;&#65292;&#21487;&#20197;&#20026;&#27599;&#20010;&#37096;&#20998;&#20998;&#37197;&#19968;&#20010;&#29420;&#31435;&#30340;&#38145;&#12290;&#36825;&#26679;&#65292;&#19981;&#21516;&#30340;&#32447;&#31243;&#21487;&#20197;&#24182;&#21457;&#22320;&#35775;&#38382;&#19981;&#21516;&#30340;&#36164;&#28304;&#65292;&#20943;&#23569;&#20102;&#38145;&#30340;&#20105;&#29992;&#65292;&#25552;&#39640;&#20102;&#24182;&#34892;&#24615;&#12290;<\/p>\n\n\n<h4 class=\"wp-block-heading wp-block-heading\" id=\"3-e68f90e9ab98e5b9b6e58f91e680a7e883bdefbc9a\">3.&#25552;&#39640;&#24182;&#21457;&#24615;&#33021;&#65306;<\/h4>\n\n\n<p class=\"wp-block-paragraph \">&#20351;&#29992;&#22810;&#25226;&#38145;&#21487;&#20197;&#25552;&#39640;&#31243;&#24207;&#30340;&#24182;&#21457;&#24615;&#33021;&#12290;&#36890;&#36807;&#32454;&#31890;&#24230;&#30340;&#38145;&#31890;&#24230;&#65292;&#21487;&#20197;&#35753;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#35775;&#38382;&#21644;&#20462;&#25913;&#19981;&#21516;&#30340;&#36164;&#28304;&#65292;&#20174;&#32780;&#25552;&#39640;&#24182;&#34892;&#24615;&#21644;&#25972;&#20307;&#24615;&#33021;&#12290;<\/p>\n\n\n<h4 class=\"wp-block-heading wp-block-heading\" id=\"4-e981bfe5858de6adbbe99481efbc9a\">4.&#36991;&#20813;&#27515;&#38145;&#65306;<\/h4>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#20351;&#29992;&#22810;&#25226;&#38145;&#30340;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#26356;&#22909;&#22320;&#35268;&#21010;&#38145;&#30340;&#33719;&#21462;&#21644;&#37322;&#25918;&#39034;&#24207;&#65292;&#36991;&#20813;&#27515;&#38145;&#30340;&#21457;&#29983;&#12290;&#36890;&#36807;&#21512;&#29702;&#22320;&#32452;&#32455;&#38145;&#30340;&#33719;&#21462;&#21644;&#37322;&#25918;&#65292;&#21487;&#20197;&#26368;&#23567;&#21270;&#27515;&#38145;&#30340;&#21487;&#33021;&#24615;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#27515;&#38145;&#30340;&#20363;&#23376;&#65306;<\/p>\n\n\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro padding-bottom-disabled\" data-code-block-pro-font-family=\"Code-Pro-JetBrains-Mono\" style=\"font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem\"><span style=\"display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"54\" height=\"14\" viewBox=\"0 0 54 14\"><g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1 1)\"><circle cx=\"6\" cy=\"6\" r=\"6\" fill=\"#FF5F56\" stroke=\"#E0443E\" stroke-width=\".5\"><\/circle><circle cx=\"26\" cy=\"6\" r=\"6\" fill=\"#FFBD2E\" stroke=\"#DEA123\" stroke-width=\".5\"><\/circle><circle cx=\"46\" cy=\"6\" r=\"6\" fill=\"#27C93F\" stroke=\"#1AAB29\" stroke-width=\".5\"><\/circle><\/g><\/svg><\/span><span role=\"button\" tabindex=\"0\" data-code=\"import threading\n\n# \u5171\u4eab\u8d44\u6e90\nshared_resource = 0\nlock = threading.Lock() \n\n\n\n# \u8ba1\u7b97\u51fd\u6570\ndef calculate():\n    global shared_resource\n    for _ in range(10000):\n        lock.acquire()  # \u4e0a\u9501\n        lock.acquire()    # \u666e\u901a\u9501\u4e0a\u9501\u540e\u5fc5\u987b\u89e3\u9501\uff0c\u4e0d\u7136\u518d\u4e00\u6b21\u5c1d\u8bd5\u4e0a\u9501\u4f1a\u4e00\u76f4\u7b49\u5f85\u89e3\u9501\uff0c\u4f46\u53c8\u65e0\u6cd5\u8d70\u5230\u4e0b\u4e00\u6b65\u89e3\u9501\uff0c\u5bfc\u81f4\u6b7b\u9501\n        shared_resource += 1\n        lock.release()  # \u89e3\u9501\n        lock.release()\n\n\nthreads = []\nfor _ in range(9):\n    thread = threading.Thread(target=calculate)\n    threads.append(thread)\n\nfor thread in threads:\n    thread.start()\n\nfor thread in threads:\n    thread.join()\n\nprint(f&quot;Final value of shared_resource: {shared_resource}&quot;)\" style=\"color:#F8F8F2;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki dracula\" style=\"background-color: #282A36\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FF79C6\">import<\/span><span style=\"color: #F8F8F2\"> threading<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u5171\u4eab\u8d44\u6e90<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">shared_resource <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">0<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">lock <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.Lock() <\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u8ba1\u7b97\u51fd\u6570<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">calculate<\/span><span style=\"color: #F8F8F2\">():<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">global<\/span><span style=\"color: #F8F8F2\"> shared_resource<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> _ <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">10000<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.acquire()  <\/span><span style=\"color: #6272A4\"># \u4e0a\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.acquire()    <\/span><span style=\"color: #6272A4\"># \u666e\u901a\u9501\u4e0a\u9501\u540e\u5fc5\u987b\u89e3\u9501\uff0c\u4e0d\u7136\u518d\u4e00\u6b21\u5c1d\u8bd5\u4e0a\u9501\u4f1a\u4e00\u76f4\u7b49\u5f85\u89e3\u9501\uff0c\u4f46\u53c8\u65e0\u6cd5\u8d70\u5230\u4e0b\u4e00\u6b65\u89e3\u9501\uff0c\u5bfc\u81f4\u6b7b\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        shared_resource <\/span><span style=\"color: #FF79C6\">+=<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">1<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.release()  <\/span><span style=\"color: #6272A4\"># \u89e3\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        lock.release()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">threads <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> []<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> _ <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">9<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">calculate)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    threads.append(thread)<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> thread <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> threads:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread.start()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> thread <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> threads:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    thread.join()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #FF79C6\">f<\/span><span style=\"color: #F1FA8C\">&quot;Final value of shared_resource: <\/span><span style=\"color: #BD93F9\">{<\/span><span style=\"color: #F8F8F2\">shared_resource<\/span><span style=\"color: #BD93F9\">}<\/span><span style=\"color: #F1FA8C\">&quot;<\/span><span style=\"color: #F8F8F2\">)<\/span><\/span><\/code><\/pre><span style=\"display:flex;align-items:flex-end;padding:10px;width:100%;justify-content:flex-end;background-color:#282A36;color:#efefe1;font-size:12px;line-height:1;position:relative\">Python<\/span><\/div>\n\n\n<p class=\"wp-block-paragraph \">&#22810;&#20010;&#38145;&#23545;&#35937;&#20063;&#20250;&#22312;&#19981;&#32463;&#24847;&#38388;&#23548;&#33268;&#27515;&#38145;&#65292;&#25152;&#20197;&#20840;&#23616;&#20844;&#29992;&#19968;&#20010;&#38145;&#23545;&#35937;<\/p>\n\n\n<h4 class=\"wp-block-heading wp-block-heading\" id=\"5-e58886e7a6bbe8afbbe58699e6938de4bd9cefbc9a\">5.&#20998;&#31163;&#35835;&#20889;&#25805;&#20316;&#65306;<\/h4>\n\n\n<p class=\"wp-block-paragraph \">&#22914;&#26524;&#19968;&#20010;&#25991;&#20214;&#21516;&#26102;&#38754;&#20020;&#35835;&#21644;&#20889;&#30340;&#25805;&#20316;&#65292;&#21487;&#20197;&#20351;&#29992;&#35835;&#20889;&#38145;&#65288;&#20063;&#31216;&#20026;&#20849;&#20139;-&#25490;&#23427;&#38145;&#65289;&#26469;&#23454;&#29616;&#35835;&#20889;&#25805;&#20316;&#30340;&#20998;&#31163;&#12290;&#35835;&#20889;&#38145;&#20801;&#35768;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#23545;&#20849;&#20139;&#36164;&#28304;&#36827;&#34892;&#35835;&#21462;&#65292;&#20294;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#33021;&#22815;&#23545;&#20849;&#20139;&#36164;&#28304;&#36827;&#34892;&#20889;&#25805;&#20316;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">example&#65306;<\/p>\n\n\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro padding-bottom-disabled\" data-code-block-pro-font-family=\"Code-Pro-JetBrains-Mono\" style=\"font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem\"><span style=\"display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"54\" height=\"14\" viewBox=\"0 0 54 14\"><g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1 1)\"><circle cx=\"6\" cy=\"6\" r=\"6\" fill=\"#FF5F56\" stroke=\"#E0443E\" stroke-width=\".5\"><\/circle><circle cx=\"26\" cy=\"6\" r=\"6\" fill=\"#FFBD2E\" stroke=\"#DEA123\" stroke-width=\".5\"><\/circle><circle cx=\"46\" cy=\"6\" r=\"6\" fill=\"#27C93F\" stroke=\"#1AAB29\" stroke-width=\".5\"><\/circle><\/g><\/svg><\/span><span role=\"button\" tabindex=\"0\" data-code=\"import threading\n\nclass File:\n    def __init__(self):\n        self.data = []\n        self.lock = threading.RWLock()\n\n    def read_data(self):\n        self.lock.acquire_read()  # \u83b7\u53d6\u8bfb\u9501\n        try:\n            # \u8bfb\u53d6\u6570\u636e\n            print(&quot;Reading data:&quot;, self.data)\n        finally:\n            self.lock.release_read()  # \u91ca\u653e\u8bfb\u9501\n\n    def write_data(self, new_data):\n        self.lock.acquire_write()  # \u83b7\u53d6\u5199\u9501\n        try:\n            # \u4fee\u6539\u6570\u636e\n            self.data = new_data\n            print(&quot;Writing data:&quot;, self.data)\n        finally:\n            self.lock.release_write()  # \u91ca\u653e\u5199\u9501\n\n# \u521b\u5efa\u6587\u4ef6\u5bf9\u8c611\u70ed\u6b66\u566834\u6211\u53742\u6211\u5374212121221212121212\u8bf7\u95ee111\u00b7\nfile = File()\n\n# \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u8bfb\u64cd\u4f5c\nfor _ in range(3):\n    threading.Thread(target=file.read_data).start()\n\n# \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5199\u64cd\u4f5c\nthreading.Thread(target=file.write_data, args=([1, 2, 3],)).start()\" style=\"color:#F8F8F2;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki dracula\" style=\"background-color: #282A36\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FF79C6\">import<\/span><span style=\"color: #F8F8F2\"> threading<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">class<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">File<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #BD93F9\">__init__<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> []<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> threading.RWLock()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">read_data<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock.acquire_read()  <\/span><span style=\"color: #6272A4\"># \u83b7\u53d6\u8bfb\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">try<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #6272A4\"># \u8bfb\u53d6\u6570\u636e<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F1FA8C\">Reading data:<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">finally<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock.release_read()  <\/span><span style=\"color: #6272A4\"># \u91ca\u653e\u8bfb\u9501<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    <\/span><span style=\"color: #FF79C6\">def<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #50FA7B\">write_data<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #FFB86C; font-style: italic\">new_data<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock.acquire_write()  <\/span><span style=\"color: #6272A4\"># \u83b7\u53d6\u5199\u9501<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">try<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #6272A4\"># \u4fee\u6539\u6570\u636e<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> new_data<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #8BE9FD\">print<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F1FA8C\">Writing data:<\/span><span style=\"color: #E9F284\">&quot;<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.data)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        <\/span><span style=\"color: #FF79C6\">finally<\/span><span style=\"color: #F8F8F2\">:<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            <\/span><span style=\"color: #BD93F9; font-style: italic\">self<\/span><span style=\"color: #F8F8F2\">.lock.release_write()  <\/span><span style=\"color: #6272A4\"># \u91ca\u653e\u5199\u9501<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u6587\u4ef6\u5bf9\u8c611\u70ed\u6b66\u566834\u6211\u53742\u6211\u5374212121221212121212\u8bf7\u95ee111\u00b7<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">file <\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\"> File()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u8bfb\u64cd\u4f5c<\/span><\/span>\n<span class=\"line\"><span style=\"color: #FF79C6\">for<\/span><span style=\"color: #F8F8F2\"> _ <\/span><span style=\"color: #FF79C6\">in<\/span><span style=\"color: #F8F8F2\"> <\/span><span style=\"color: #8BE9FD\">range<\/span><span style=\"color: #F8F8F2\">(<\/span><span style=\"color: #BD93F9\">3<\/span><span style=\"color: #F8F8F2\">):<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">file.read_data).start()<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #6272A4\"># \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5199\u64cd\u4f5c<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">threading.Thread(<\/span><span style=\"color: #FFB86C; font-style: italic\">target<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">file.write_data, <\/span><span style=\"color: #FFB86C; font-style: italic\">args<\/span><span style=\"color: #FF79C6\">=<\/span><span style=\"color: #F8F8F2\">([<\/span><span style=\"color: #BD93F9\">1<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9\">2<\/span><span style=\"color: #F8F8F2\">, <\/span><span style=\"color: #BD93F9\">3<\/span><span style=\"color: #F8F8F2\">],)).start()<\/span><\/span><\/code><\/pre><span style=\"display:flex;align-items:flex-end;padding:10px;width:100%;justify-content:flex-end;background-color:#282A36;color:#efefe1;font-size:12px;line-height:1;position:relative\">Python<\/span><\/div>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#19978;&#36848;&#20195;&#30721;&#20013;&#65292;<code>File<\/code> &#31867;&#34920;&#31034;&#19968;&#20010;&#25991;&#20214;&#23545;&#35937;&#65292;&#21253;&#21547;&#20102;&#19968;&#20010;&#25968;&#25454;&#21015;&#34920; <code>data<\/code> &#21644;&#19968;&#20010;&#35835;&#20889;&#38145; <code>lock<\/code>&#12290;<code>read_data<\/code> &#26041;&#27861;&#20351;&#29992;&#35835;&#38145;&#26469;&#35835;&#21462;&#25968;&#25454;&#65292;&#32780; <code>write_data<\/code> &#26041;&#27861;&#20351;&#29992;&#20889;&#38145;&#26469;&#20462;&#25913;&#25968;&#25454;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#22312;&#20027;&#32447;&#31243;&#20013;&#65292;&#25105;&#20204;&#21019;&#24314;&#20102;&#22810;&#20010;&#35835;&#32447;&#31243;&#21644;&#19968;&#20010;&#20889;&#32447;&#31243;&#12290;&#35835;&#32447;&#31243;&#36890;&#36807;&#35843;&#29992; <code>file.read_data()<\/code> &#26041;&#27861;&#26469;&#35835;&#21462;&#25968;&#25454;&#65292;&#32780;&#20889;&#32447;&#31243;&#36890;&#36807;&#35843;&#29992; <code>file.write_data()<\/code> &#26041;&#27861;&#26469;&#20462;&#25913;&#25968;&#25454;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#30001;&#20110;&#35835;&#38145;&#26159;&#20849;&#20139;&#38145;&#65292;&#22810;&#20010;&#32447;&#31243;&#21487;&#20197;&#21516;&#26102;&#25345;&#26377;&#35835;&#38145;&#65292;&#23454;&#29616;&#24182;&#21457;&#35835;&#25805;&#20316;&#12290;&#32780;&#20889;&#38145;&#26159;&#25490;&#23427;&#38145;&#65292;&#19968;&#27425;&#21482;&#33021;&#26377;&#19968;&#20010;&#32447;&#31243;&#25345;&#26377;&#20889;&#38145;&#65292;&#23454;&#29616;&#20114;&#26021;&#30340;&#20889;&#25805;&#20316;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#36890;&#36807;&#35835;&#20889;&#38145;&#30340;&#20351;&#29992;&#65292;&#25105;&#20204;&#21487;&#20197;&#23454;&#29616;&#23545;&#25991;&#20214;&#23545;&#35937;&#30340;&#35835;&#20889;&#25805;&#20316;&#30340;&#20998;&#31163;&#65292;&#20174;&#32780;&#25552;&#39640;&#24182;&#21457;&#24615;&#33021;&#65292;&#24182;&#20445;&#35777;&#25968;&#25454;&#30340;&#19968;&#33268;&#24615;&#12290;<\/p>\n\n\n<p class=\"wp-block-paragraph \">&#24635;&#20043;&#65292;&#20351;&#29992;&#22810;&#25226;&#38145;&#21487;&#20197;&#26356;&#31934;&#32454;&#22320;&#25511;&#21046;&#24182;&#21457;&#25805;&#20316;&#65292;&#20445;&#25252;&#19981;&#21516;&#30340;&#20020;&#30028;&#21306;&#65292;&#20943;&#23569;&#38145;&#31454;&#20105;&#65292;&#24182;&#25552;&#39640;&#24182;&#21457;&#24615;&#33021;&#12290;&#21516;&#26102;&#65292;&#33391;&#22909;&#22320;&#20351;&#29992;&#22810;&#25226;&#38145;&#21487;&#20197;&#36991;&#20813;&#27515;&#38145;&#65292;&#24182;&#23454;&#29616;&#35835;&#20889;&#25805;&#20316;&#30340;&#20998;&#31163;&#12290;&#28982;&#32780;&#65292;&#20351;&#29992;&#22810;&#25226;&#38145;&#20063;&#35201;&#35880;&#24910;&#65292;&#38656;&#35201;&#21512;&#29702;&#35268;&#21010;&#38145;&#30340;&#33719;&#21462;&#21644;&#37322;&#25918;&#39034;&#24207;&#65292;&#20197;&#36991;&#20813;&#27515;&#38145;&#21644;&#20854;&#20182;&#24182;&#21457;&#38382;&#39064;&#12290;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>&#32447;&#31243;&#23433;&#20840; &#32447;&#31243;&#038;#2343 &hellip;<\/p>\n","protected":false},"author":4,"featured_media":435,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[8,10],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v20.12 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.szuea.com\/2023\/08\/02\/python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\/\" \/>\n<meta property=\"og:locale\" content=\"zh_CN\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA\" \/>\n<meta property=\"og:description\" content=\"&#32447;&#31243;&#23433;&#20840; &#32447;&#31243;&amp;#2343 &hellip;\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.szuea.com\/2023\/08\/02\/python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\/\" \/>\n<meta property=\"og:site_name\" content=\"SZUEA\" \/>\n<meta property=\"article:published_time\" content=\"2023-08-02T07:18:17+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2023-08-02T07:18:19+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/08\/template.webp\" \/>\n\t<meta property=\"og:image:width\" content=\"1280\" \/>\n\t<meta property=\"og:image:height\" content=\"720\" \/>\n\t<meta property=\"og:image:type\" content=\"image\/webp\" \/>\n<meta name=\"author\" content=\"SZUEA\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"\u4f5c\u8005\" \/>\n\t<meta name=\"twitter:data1\" content=\"SZUEA\" \/>\n\t<meta name=\"twitter:label2\" content=\"\u9884\u8ba1\u9605\u8bfb\u65f6\u95f4\" \/>\n\t<meta name=\"twitter:data2\" content=\"1\u5206\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Article\",\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/\"},\"author\":{\"name\":\"SZUEA\",\"@id\":\"https:\/\/www.szuea.com\/#\/schema\/person\/f8ebbeab96e6d31341c42227322497cc\"},\"headline\":\"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\",\"datePublished\":\"2023-08-02T07:18:17+00:00\",\"dateModified\":\"2023-08-02T07:18:19+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/\"},\"wordCount\":19,\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.szuea.com\/#organization\"},\"articleSection\":[\"Python\",\"\u5b9e\u8df5\u7cfb\u5217\u6559\u7a0b\"],\"inLanguage\":\"zh-CN\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#respond\"]}]},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/\",\"url\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/\",\"name\":\"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA\",\"isPartOf\":{\"@id\":\"https:\/\/www.szuea.com\/#website\"},\"datePublished\":\"2023-08-02T07:18:17+00:00\",\"dateModified\":\"2023-08-02T07:18:19+00:00\",\"breadcrumb\":{\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#breadcrumb\"},\"inLanguage\":\"zh-CN\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"\u9996\u9875\",\"item\":\"https:\/\/www.szuea.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.szuea.com\/#website\",\"url\":\"https:\/\/www.szuea.com\/\",\"name\":\"SZUEA\",\"description\":\"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a\",\"publisher\":{\"@id\":\"https:\/\/www.szuea.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/www.szuea.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"zh-CN\"},{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.szuea.com\/#organization\",\"name\":\"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a\",\"url\":\"https:\/\/www.szuea.com\/\",\"logo\":{\"@type\":\"ImageObject\",\"inLanguage\":\"zh-CN\",\"@id\":\"https:\/\/www.szuea.com\/#\/schema\/logo\/image\/\",\"url\":\"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/07\/cropped-Logo.jpg\",\"contentUrl\":\"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/07\/cropped-Logo.jpg\",\"width\":512,\"height\":512,\"caption\":\"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a\"},\"image\":{\"@id\":\"https:\/\/www.szuea.com\/#\/schema\/logo\/image\/\"},\"sameAs\":[\"https:\/\/space.bilibili.com\/1618660019\"]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.szuea.com\/#\/schema\/person\/f8ebbeab96e6d31341c42227322497cc\",\"name\":\"SZUEA\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"zh-CN\",\"@id\":\"https:\/\/www.szuea.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/cec5b301ebb87632c1da657b6ed5fe56?s=96&d=mm&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/cec5b301ebb87632c1da657b6ed5fe56?s=96&d=mm&r=g\",\"caption\":\"SZUEA\"},\"sameAs\":[\"http:\/\/szuea.com\"],\"url\":\"https:\/\/www.szuea.com\/author\/szuea\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/www.szuea.com\/2023\/08\/02\/python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\/","og_locale":"zh_CN","og_type":"article","og_title":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA","og_description":"&#32447;&#31243;&#23433;&#20840; &#32447;&#31243;&#2343 &hellip;","og_url":"https:\/\/www.szuea.com\/2023\/08\/02\/python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501\/","og_site_name":"SZUEA","article_published_time":"2023-08-02T07:18:17+00:00","article_modified_time":"2023-08-02T07:18:19+00:00","og_image":[{"width":1280,"height":720,"url":"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/08\/template.webp","type":"image\/webp"}],"author":"SZUEA","twitter_card":"summary_large_image","twitter_misc":{"\u4f5c\u8005":"SZUEA","\u9884\u8ba1\u9605\u8bfb\u65f6\u95f4":"1\u5206"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Article","@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#article","isPartOf":{"@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/"},"author":{"name":"SZUEA","@id":"https:\/\/www.szuea.com\/#\/schema\/person\/f8ebbeab96e6d31341c42227322497cc"},"headline":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501","datePublished":"2023-08-02T07:18:17+00:00","dateModified":"2023-08-02T07:18:19+00:00","mainEntityOfPage":{"@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/"},"wordCount":19,"commentCount":0,"publisher":{"@id":"https:\/\/www.szuea.com\/#organization"},"articleSection":["Python","\u5b9e\u8df5\u7cfb\u5217\u6559\u7a0b"],"inLanguage":"zh-CN","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#respond"]}]},{"@type":"WebPage","@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/","url":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/","name":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501 - SZUEA","isPartOf":{"@id":"https:\/\/www.szuea.com\/#website"},"datePublished":"2023-08-02T07:18:17+00:00","dateModified":"2023-08-02T07:18:19+00:00","breadcrumb":{"@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#breadcrumb"},"inLanguage":"zh-CN","potentialAction":[{"@type":"ReadAction","target":["https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/www.szuea.com\/2023\/08\/02\/python%e5%ae%9e%e8%b7%b5%ef%bc%9a%e7%ba%bf%e7%a8%8b%e9%94%81\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"\u9996\u9875","item":"https:\/\/www.szuea.com\/"},{"@type":"ListItem","position":2,"name":"Python\u5b9e\u8df5\uff1a\u7ebf\u7a0b\u9501"}]},{"@type":"WebSite","@id":"https:\/\/www.szuea.com\/#website","url":"https:\/\/www.szuea.com\/","name":"SZUEA","description":"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a","publisher":{"@id":"https:\/\/www.szuea.com\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/www.szuea.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"zh-CN"},{"@type":"Organization","@id":"https:\/\/www.szuea.com\/#organization","name":"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a","url":"https:\/\/www.szuea.com\/","logo":{"@type":"ImageObject","inLanguage":"zh-CN","@id":"https:\/\/www.szuea.com\/#\/schema\/logo\/image\/","url":"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/07\/cropped-Logo.jpg","contentUrl":"https:\/\/www.szuea.com\/wp-content\/uploads\/2023\/07\/cropped-Logo.jpg","width":512,"height":512,"caption":"\u6df1\u5733\u5927\u5b66\u7535\u5b50\u534f\u4f1a"},"image":{"@id":"https:\/\/www.szuea.com\/#\/schema\/logo\/image\/"},"sameAs":["https:\/\/space.bilibili.com\/1618660019"]},{"@type":"Person","@id":"https:\/\/www.szuea.com\/#\/schema\/person\/f8ebbeab96e6d31341c42227322497cc","name":"SZUEA","image":{"@type":"ImageObject","inLanguage":"zh-CN","@id":"https:\/\/www.szuea.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/cec5b301ebb87632c1da657b6ed5fe56?s=96&d=mm&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/cec5b301ebb87632c1da657b6ed5fe56?s=96&d=mm&r=g","caption":"SZUEA"},"sameAs":["http:\/\/szuea.com"],"url":"https:\/\/www.szuea.com\/author\/szuea\/"}]}},"_links":{"self":[{"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/posts\/478"}],"collection":[{"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/users\/4"}],"replies":[{"embeddable":true,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/comments?post=478"}],"version-history":[{"count":1,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/posts\/478\/revisions"}],"predecessor-version":[{"id":479,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/posts\/478\/revisions\/479"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/media\/435"}],"wp:attachment":[{"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/media?parent=478"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/categories?post=478"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.szuea.com\/wp-json\/wp\/v2\/tags?post=478"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}